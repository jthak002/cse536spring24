import os
import subprocess

next_round = -1
with open('/home/moderator/log/nextround') as f:
    next_round = int(f.read())

print('Next Round:', next_round)

expected_file_name = f'/home/moderator/log/{next_round}m.log'

while(not os.path.exists(expected_file_name)):
    print(f"File {expected_file_name} does not exist")

process = subprocess.Popen(['tail', '-f', expected_file_name], stdout=subprocess.PIPE, stderr=subprocess.PIPE)

try:
    while True:
        line = process.stdout.readline()

        if not line:
            break
        print(line)

except KeyboardInterrupt:
    print('End program')
finally:
    process.kill()